{"ast":null,"code":"/* eslint-disable array-callback-return */\n\n/* eslint-disable no-useless-return */\n\n/* eslint-disable no-loop-func */\n\n/* eslint-disable consistent-return */\n\n/* eslint-disable no-plusplus */\n\n/* eslint-disable no-restricted-syntax */\nimport moment from 'moment';\n\nconst nextIrrigation = (weekData, roundsData) => {\n  if (!weekData || !roundsData) {\n    return 'Error';\n  }\n\n  const nextSevenDays = [];\n  const irrigationStartHours = Object.keys(roundsData).map(round => {\n    if (roundsData[round] && roundsData[round].isActive) return moment(roundsData[round].startTime, 'HH:mm:ss');\n  }).filter(moment => moment !== undefined);\n  const sortedStartHours = irrigationStartHours.sort((a, b) => a.valueOf() - b.valueOf());\n  console.log(irrigationStartHours);\n  console.log(sortedStartHours);\n  const minTime = sortedStartHours[0];\n  const now = moment(new Date(), 'HH:mm:ss');\n\n  for (let i = 0; i < 7; i++) {\n    nextSevenDays[i] = moment().add(i, 'days').format('dddd');\n\n    if (weekData[nextSevenDays[i].toLowerCase()]) {\n      if (minTime.isAfter(now)) {\n        return `${nextSevenDays[i]} ${minTime.format('HH:mm')}`;\n      }\n\n      if (i === 0) {\n        // its today\n        for (let j = 0; j < sortedStartHours.length; j++) {\n          if (sortedStartHours[j].isAfter(now)) {\n            return `${nextSevenDays[i]} ${sortedStartHours[j].format('HH:mm')}`;\n          }\n        }\n      }\n\n      return `${nextSevenDays[i]} ${minTime.format('HH:mm')}`;\n    }\n  }\n\n  return 'Not set';\n};\n\nexport default nextIrrigation;","map":{"version":3,"sources":["/Users/tamirhen/Desktop/Irrigation-System-React/irrigation-react/src/utils/NextIrrigation.js"],"names":["moment","nextIrrigation","weekData","roundsData","nextSevenDays","irrigationStartHours","Object","keys","map","round","isActive","startTime","filter","undefined","sortedStartHours","sort","a","b","valueOf","console","log","minTime","now","Date","i","add","format","toLowerCase","isAfter","j","length"],"mappings":"AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;AACA,OAAOA,MAAP,MAAmB,QAAnB;;AAEA,MAAMC,cAAc,GAAG,CAACC,QAAD,EAAWC,UAAX,KAA0B;AAC/C,MAAI,CAACD,QAAD,IAAa,CAACC,UAAlB,EAA8B;AAC5B,WAAO,OAAP;AACD;;AACD,QAAMC,aAAa,GAAG,EAAtB;AACA,QAAMC,oBAAoB,GAAGC,MAAM,CAACC,IAAP,CAAYJ,UAAZ,EAC1BK,GAD0B,CACrBC,KAAD,IAAW;AACd,QAAIN,UAAU,CAACM,KAAD,CAAV,IAAqBN,UAAU,CAACM,KAAD,CAAV,CAAkBC,QAA3C,EACE,OAAOV,MAAM,CAACG,UAAU,CAACM,KAAD,CAAV,CAAkBE,SAAnB,EAA8B,UAA9B,CAAb;AACH,GAJ0B,EAK1BC,MAL0B,CAKlBZ,MAAD,IAAYA,MAAM,KAAKa,SALJ,CAA7B;AAMA,QAAMC,gBAAgB,GAAGT,oBAAoB,CAACU,IAArB,CACvB,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACE,OAAF,KAAcD,CAAC,CAACC,OAAF,EADD,CAAzB;AAGAC,EAAAA,OAAO,CAACC,GAAR,CAAYf,oBAAZ;AACAc,EAAAA,OAAO,CAACC,GAAR,CAAYN,gBAAZ;AACA,QAAMO,OAAO,GAAGP,gBAAgB,CAAC,CAAD,CAAhC;AACA,QAAMQ,GAAG,GAAGtB,MAAM,CAAC,IAAIuB,IAAJ,EAAD,EAAa,UAAb,CAAlB;;AAEA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1BpB,IAAAA,aAAa,CAACoB,CAAD,CAAb,GAAmBxB,MAAM,GAAGyB,GAAT,CAAaD,CAAb,EAAgB,MAAhB,EAAwBE,MAAxB,CAA+B,MAA/B,CAAnB;;AACA,QAAIxB,QAAQ,CAACE,aAAa,CAACoB,CAAD,CAAb,CAAiBG,WAAjB,EAAD,CAAZ,EAA8C;AAC5C,UAAIN,OAAO,CAACO,OAAR,CAAgBN,GAAhB,CAAJ,EAA0B;AACxB,eAAQ,GAAElB,aAAa,CAACoB,CAAD,CAAI,IAAGH,OAAO,CAACK,MAAR,CAAe,OAAf,CAAwB,EAAtD;AACD;;AAED,UAAIF,CAAC,KAAK,CAAV,EAAa;AACX;AACA,aAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGf,gBAAgB,CAACgB,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;AAChD,cAAIf,gBAAgB,CAACe,CAAD,CAAhB,CAAoBD,OAApB,CAA4BN,GAA5B,CAAJ,EAAsC;AACpC,mBAAQ,GAAElB,aAAa,CAACoB,CAAD,CAAI,IAAGV,gBAAgB,CAACe,CAAD,CAAhB,CAAoBH,MAApB,CAA2B,OAA3B,CAAoC,EAAlE;AACD;AACF;AACF;;AACD,aAAQ,GAAEtB,aAAa,CAACoB,CAAD,CAAI,IAAGH,OAAO,CAACK,MAAR,CAAe,OAAf,CAAwB,EAAtD;AACD;AACF;;AACD,SAAO,SAAP;AACD,CAtCD;;AAwCA,eAAezB,cAAf","sourcesContent":["/* eslint-disable array-callback-return */\n/* eslint-disable no-useless-return */\n/* eslint-disable no-loop-func */\n/* eslint-disable consistent-return */\n/* eslint-disable no-plusplus */\n/* eslint-disable no-restricted-syntax */\nimport moment from 'moment';\n\nconst nextIrrigation = (weekData, roundsData) => {\n  if (!weekData || !roundsData) {\n    return 'Error';\n  }\n  const nextSevenDays = [];\n  const irrigationStartHours = Object.keys(roundsData)\n    .map((round) => {\n      if (roundsData[round] && roundsData[round].isActive)\n        return moment(roundsData[round].startTime, 'HH:mm:ss');\n    })\n    .filter((moment) => moment !== undefined);\n  const sortedStartHours = irrigationStartHours.sort(\n    (a, b) => a.valueOf() - b.valueOf(),\n  );\n  console.log(irrigationStartHours);\n  console.log(sortedStartHours);\n  const minTime = sortedStartHours[0];\n  const now = moment(new Date(), 'HH:mm:ss');\n\n  for (let i = 0; i < 7; i++) {\n    nextSevenDays[i] = moment().add(i, 'days').format('dddd');\n    if (weekData[nextSevenDays[i].toLowerCase()]) {\n      if (minTime.isAfter(now)) {\n        return `${nextSevenDays[i]} ${minTime.format('HH:mm')}`;\n      }\n\n      if (i === 0) {\n        // its today\n        for (let j = 0; j < sortedStartHours.length; j++) {\n          if (sortedStartHours[j].isAfter(now)) {\n            return `${nextSevenDays[i]} ${sortedStartHours[j].format('HH:mm')}`;\n          }\n        }\n      }\n      return `${nextSevenDays[i]} ${minTime.format('HH:mm')}`;\n    }\n  }\n  return 'Not set';\n};\n\nexport default nextIrrigation;\n"]},"metadata":{},"sourceType":"module"}