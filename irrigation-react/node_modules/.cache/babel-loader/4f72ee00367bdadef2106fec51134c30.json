{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/tamirhen/Desktop/Irrigation-System-React/irrigation-react/src/components/Tabs.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable import/no-extraneous-dependencies */\n\n/* eslint-disable react/require-default-props */\n\n/* eslint-disable react/jsx-props-no-spreading */\n\n/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport SwipeableViews from 'react-swipeable-views';\nimport { makeStyles, useTheme, useState } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport { Button } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport axios from 'axios';\nimport validateWeek from '../utils/Validate';\nimport { firestore } from '../utils/Firebase';\nimport Day from './Day';\nimport Cycle from './Cycle';\nimport './Tabs.css';\n\nfunction TabPanel(props) {\n  const {\n    children,\n    value,\n    index,\n    ...other\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: `full-width-tabpanel-${index}`,\n    \"aria-labelledby\": `full-width-tab-${index}`,\n    ...other,\n    children: value === index && /*#__PURE__*/_jsxDEV(Box, {\n      p: 3,\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        component: \"span\",\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 5\n  }, this);\n}\n\n_c = TabPanel;\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `full-width-tab-${index}`,\n    'aria-controls': `full-width-tabpanel-${index}`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    backgroundColor: theme.palette.background.paper,\n    width: 700,\n    height: 420,\n    marginLeft: 'auto',\n    marginRight: 'auto'\n  }\n}));\nexport default function FullWidthTabs(props) {\n  _s();\n\n  const classes = useStyles();\n  const theme = useTheme();\n  const [value, setValue] = React.useState(0);\n  const [loading, setLoading] = useState('determinate');\n  const [submitMessage, setSubmitMessage] = useState('');\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState(false);\n  const [textColor, setTextColor] = useState('red');\n  const {\n    rounds,\n    week,\n    updateRound,\n    updateDay,\n    userEmail\n  } = props;\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  const handleChangeIndex = index => {\n    setValue(index);\n  };\n\n  const setMessage = message => {\n    setLoading('determinate');\n\n    if (message === 'Done') {\n      setTextColor('green');\n    } else {\n      setTextColor('red');\n    }\n\n    setSubmitMessage(message);\n  };\n\n  const onSubmit = event => {\n    event.preventDefault();\n    setIsSubmitDisabled(true);\n    setMessage('');\n    setLoading('indeterminate');\n    const db = firestore;\n    const data = { ...week,\n      firstRoundStart: rounds.round1.startTime ? `${rounds.round1.startTime.split(':')[0]}:${rounds.round1.startTime.split(':')[1]}:00` : null,\n      firstRoundEnd: rounds.round1.endTime ? `${rounds.round1.endTime.split(':')[0]}:${rounds.round1.endTime.split(':')[1]}:00` : null,\n      secondRoundStart: rounds.round2.startTime ? `${rounds.round2.startTime.split(':')[0]}:${rounds.round2.startTime.split(':')[1]}:00` : null,\n      secondRoundEnd: rounds.round2.endTime ? `${rounds.round2.endTime.split(':')[0]}:${rounds.round2.endTime.split(':')[1]}:00` : null,\n      thirdRoundStart: rounds.round3.startTime ? `${rounds.round3.startTime.split(':')[0]}:${rounds.round3.startTime.split(':')[1]}:00` : null,\n      thirdRoundEnd: rounds.round3.endTime ? `${rounds.round3.endTime.split(':')[0]}:${rounds.round3.endTime.split(':')[1]}:00` : null,\n      isFirstRoundActive: rounds.round1.isActive,\n      isSecondRoundActive: rounds.round2.isActive,\n      isThirdRoundActive: rounds.round3.isActive\n    };\n    const validationMessage = validateWeek(data);\n\n    if (validationMessage === 'valid') {\n      db.collection('users').doc(userEmail).get().then(user => {\n        axios.post(`${user.data().dataplicity}/update_week`, data).then(() => {\n          console.log('data updated successfully');\n          setMessage('Done');\n          setIsSubmitDisabled(false);\n        }).catch(error => {\n          console.log(error);\n          setMessage('Connection error, please try again later');\n          setIsSubmitDisabled(false);\n        });\n      }).catch(error => {\n        console.log(error);\n        setMessage('Connection error, please try again later');\n        setIsSubmitDisabled(false);\n      });\n    } else {\n      setMessage(validationMessage);\n      setIsSubmitDisabled(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"static\",\n      color: \"default\",\n      children: /*#__PURE__*/_jsxDEV(Tabs, {\n        value: value,\n        onChange: handleChange,\n        indicatorColor: \"primary\",\n        textColor: \"primary\",\n        variant: \"fullWidth\",\n        \"aria-label\": \"tabs\",\n        centered: true,\n        children: [/*#__PURE__*/_jsxDEV(Tab, {\n          label: \"Manual\",\n          ...a11yProps(0)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tab, {\n          label: \"Auto\",\n          ...a11yProps(1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tab, {\n          label: \"State\",\n          ...a11yProps(2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SwipeableViews, {\n      axis: theme.direction === 'rtl' ? 'x-reverse' : 'x',\n      index: value,\n      onChangeIndex: handleChangeIndex,\n      children: [/*#__PURE__*/_jsxDEV(TabPanel, {\n        value: value,\n        index: 0,\n        dir: theme.direction\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n        value: value,\n        index: 1,\n        dir: theme.direction,\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"main-form\",\n          onSubmit: onSubmit,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-body-wrapper\",\n            children: [/*#__PURE__*/_jsxDEV(FullWidthTabs, {\n              rounds: rounds,\n              updateRound: updateRound,\n              week: week,\n              updateDay: updateDay\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"tab-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"tab-object-wrapper\",\n                children: Object.keys(rounds).map((keyName, keyIndex) => /*#__PURE__*/_jsxDEV(Cycle, {\n                  isActive: rounds[keyName].isActive,\n                  cycleNumber: keyIndex + 1,\n                  startTime: rounds[keyName].startTime,\n                  endTime: rounds[keyName].endTime,\n                  updateRound: updateRound\n                }, keyName + rounds[keyName].isActive, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"tab-object-wrapper\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"week-list\",\n                  children: Object.keys(week).map((keyName, keyIndex) => /*#__PURE__*/_jsxDEV(Day, {\n                    day: keyName,\n                    state: week[keyName],\n                    updateDay: updateDay\n                  }, keyName + week[keyName], false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 23\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"Submit-button-wrapper\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"contained\",\n                color: \"primary\",\n                type: \"submit\",\n                disabled: isSubmitDisabled,\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"submit-message-wrapper\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"submit-message\",\n                  style: {\n                    color: textColor\n                  },\n                  children: submitMessage\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loader-wrapper\",\n                children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n                  className: \"loader\",\n                  variant: loading\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 5\n  }, this);\n}\n\n_s(FullWidthTabs, \"Yrh9jVi1PQB2BMjI72HbwEkoa7s=\", false, function () {\n  return [useStyles, useTheme];\n});\n\n_c2 = FullWidthTabs;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TabPanel\");\n$RefreshReg$(_c2, \"FullWidthTabs\");","map":{"version":3,"sources":["/Users/tamirhen/Desktop/Irrigation-System-React/irrigation-react/src/components/Tabs.js"],"names":["React","PropTypes","SwipeableViews","makeStyles","useTheme","useState","AppBar","Tabs","Tab","Typography","Box","Button","CircularProgress","axios","validateWeek","firestore","Day","Cycle","TabPanel","props","children","value","index","other","propTypes","node","any","isRequired","a11yProps","id","useStyles","theme","root","backgroundColor","palette","background","paper","width","height","marginLeft","marginRight","FullWidthTabs","classes","setValue","loading","setLoading","submitMessage","setSubmitMessage","isSubmitDisabled","setIsSubmitDisabled","textColor","setTextColor","rounds","week","updateRound","updateDay","userEmail","handleChange","event","newValue","handleChangeIndex","setMessage","message","onSubmit","preventDefault","db","data","firstRoundStart","round1","startTime","split","firstRoundEnd","endTime","secondRoundStart","round2","secondRoundEnd","thirdRoundStart","round3","thirdRoundEnd","isFirstRoundActive","isActive","isSecondRoundActive","isThirdRoundActive","validationMessage","collection","doc","get","then","user","post","dataplicity","console","log","catch","error","direction","Object","keys","map","keyName","keyIndex","color"],"mappings":"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","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable react/require-default-props */\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport SwipeableViews from 'react-swipeable-views';\nimport { makeStyles, useTheme, useState } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport { Button } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport axios from 'axios';\nimport validateWeek from '../utils/Validate';\nimport { firestore } from '../utils/Firebase';\n\nimport Day from './Day';\nimport Cycle from './Cycle';\n\nimport './Tabs.css';\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box p={3}>\n          <Typography component=\"span\">{children}</Typography>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `full-width-tab-${index}`,\n    'aria-controls': `full-width-tabpanel-${index}`,\n  };\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.paper,\n    width: 700,\n    height: 420,\n    marginLeft: 'auto',\n    marginRight: 'auto',\n  },\n}));\n\nexport default function FullWidthTabs(props) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [value, setValue] = React.useState(0);\n  const [loading, setLoading] = useState('determinate');\n  const [submitMessage, setSubmitMessage] = useState('');\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState(false);\n  const [textColor, setTextColor] = useState('red');\n\n  const { rounds, week, updateRound, updateDay, userEmail } = props;\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  const handleChangeIndex = (index) => {\n    setValue(index);\n  };\n\n  const setMessage = (message) => {\n    setLoading('determinate');\n    if (message === 'Done') {\n      setTextColor('green');\n    } else {\n      setTextColor('red');\n    }\n    setSubmitMessage(message);\n  };\n\n  const onSubmit = (event) => {\n    event.preventDefault();\n    setIsSubmitDisabled(true);\n    setMessage('');\n    setLoading('indeterminate');\n    const db = firestore;\n\n    const data = {\n      ...week,\n      firstRoundStart: rounds.round1.startTime\n        ? `${rounds.round1.startTime.split(':')[0]}:${\n            rounds.round1.startTime.split(':')[1]\n          }:00`\n        : null,\n      firstRoundEnd: rounds.round1.endTime\n        ? `${rounds.round1.endTime.split(':')[0]}:${\n            rounds.round1.endTime.split(':')[1]\n          }:00`\n        : null,\n      secondRoundStart: rounds.round2.startTime\n        ? `${rounds.round2.startTime.split(':')[0]}:${\n            rounds.round2.startTime.split(':')[1]\n          }:00`\n        : null,\n      secondRoundEnd: rounds.round2.endTime\n        ? `${rounds.round2.endTime.split(':')[0]}:${\n            rounds.round2.endTime.split(':')[1]\n          }:00`\n        : null,\n      thirdRoundStart: rounds.round3.startTime\n        ? `${rounds.round3.startTime.split(':')[0]}:${\n            rounds.round3.startTime.split(':')[1]\n          }:00`\n        : null,\n      thirdRoundEnd: rounds.round3.endTime\n        ? `${rounds.round3.endTime.split(':')[0]}:${\n            rounds.round3.endTime.split(':')[1]\n          }:00`\n        : null,\n      isFirstRoundActive: rounds.round1.isActive,\n      isSecondRoundActive: rounds.round2.isActive,\n      isThirdRoundActive: rounds.round3.isActive,\n    };\n\n    const validationMessage = validateWeek(data);\n\n    if (validationMessage === 'valid') {\n      db.collection('users')\n        .doc(userEmail)\n        .get()\n        .then((user) => {\n          axios\n            .post(`${user.data().dataplicity}/update_week`, data)\n            .then(() => {\n              console.log('data updated successfully');\n              setMessage('Done');\n              setIsSubmitDisabled(false);\n            })\n            .catch((error) => {\n              console.log(error);\n              setMessage('Connection error, please try again later');\n              setIsSubmitDisabled(false);\n            });\n        })\n        .catch((error) => {\n          console.log(error);\n          setMessage('Connection error, please try again later');\n          setIsSubmitDisabled(false);\n        });\n    } else {\n      setMessage(validationMessage);\n      setIsSubmitDisabled(false);\n    }\n  };\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\" color=\"default\">\n        <Tabs\n          value={value}\n          onChange={handleChange}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          variant=\"fullWidth\"\n          aria-label=\"tabs\"\n          centered\n        >\n          <Tab label=\"Manual\" {...a11yProps(0)} />\n          <Tab label=\"Auto\" {...a11yProps(1)} />\n          <Tab label=\"State\" {...a11yProps(2)} />\n        </Tabs>\n      </AppBar>\n      <SwipeableViews\n        axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n        index={value}\n        onChangeIndex={handleChangeIndex}\n      >\n        <TabPanel value={value} index={0} dir={theme.direction}>\n          {/* <Button className=\"manual-start\" variant=\"\" */}\n        </TabPanel>\n        <TabPanel value={value} index={1} dir={theme.direction}>\n          <form className=\"main-form\" onSubmit={onSubmit}>\n            <div className=\"form-body-wrapper\">\n              <FullWidthTabs\n                rounds={rounds}\n                updateRound={updateRound}\n                week={week}\n                updateDay={updateDay}\n              />\n              <div className=\"tab-body\">\n                <div className=\"tab-object-wrapper\">\n                  {Object.keys(rounds).map((keyName, keyIndex) => (\n                    <Cycle\n                      key={keyName + rounds[keyName].isActive}\n                      isActive={rounds[keyName].isActive}\n                      cycleNumber={keyIndex + 1}\n                      startTime={rounds[keyName].startTime}\n                      endTime={rounds[keyName].endTime}\n                      updateRound={updateRound}\n                    />\n                  ))}\n                </div>\n                <div className=\"tab-object-wrapper\">\n                  <ul className=\"week-list\">\n                    {Object.keys(week).map((keyName, keyIndex) => (\n                      <Day\n                        key={keyName + week[keyName]}\n                        day={keyName}\n                        state={week[keyName]}\n                        updateDay={updateDay}\n                      />\n                    ))}\n                  </ul>\n                </div>\n              </div>\n              <div className=\"Submit-button-wrapper\">\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  type=\"submit\"\n                  disabled={isSubmitDisabled}\n                >\n                  Submit\n                </Button>\n                {/* <label className=\"mock-label\"></label> */}\n                <div className=\"submit-message-wrapper\">\n                  <p className=\"submit-message\" style={{ color: textColor }}>\n                    {submitMessage}\n                  </p>\n                </div>\n                <div className=\"loader-wrapper\">\n                  <CircularProgress className=\"loader\" variant={loading} />\n                </div>\n              </div>\n            </div>\n          </form>\n        </TabPanel>\n      </SwipeableViews>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}